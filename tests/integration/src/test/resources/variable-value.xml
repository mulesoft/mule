<?xml version="1.0" encoding="UTF-8"?>
<mule xmlns="http://www.mulesoft.org/schema/mule/core"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:vm="http://www.mulesoft.org/schema/mule/vm"
      xsi:schemaLocation="
       http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
       http://www.mulesoft.org/schema/mule/vm http://www.mulesoft.org/schema/mule/vm/current/mule-vm.xsd">
    <flow name="testSetVariableFlow">
        <vm:inbound-endpoint path="${path1}" exchange-pattern="request-response"/>
        <set-variable variableName="testVariable" value="${variableValueWithADollarSign}"/>
        <set-payload value="#[testVariable]"/>
    </flow>
    <flow name="testSetVariableFlow2">
        <vm:inbound-endpoint path="${path2}" exchange-pattern="request-response"/>
        <set-variable variableName="testVariable" value="${variableValueWithADollarSign}"/>
        <set-payload value="&lt;SOA&lt;SOAP-ENV:Envelope SOAP-ENV:encodingStyle=&quot;http://schemas.xmlsoap.org/soap/encoding/&quot; xmlns:SOAP-ENV=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:SOAP-ENC=&quot;http://schemas.xmlsoap.org/soap/encoding/&quot; xmlns:tns=&quot;http://127.0.0.1/test.php&quot;&gt;&lt;SOAP-ENV:Body&gt;&lt;ns1:fetchResponse xmlns:ns1=&quot;http://127.0.0.1/test.php&quot;&gt;&lt;return xsi:type=&quot;tns:PdfDocument&quot;&gt;&lt;document xsi:type=&quot;xsd:string&quot;&gt;&lt;#[testVariable]&gt;&lt;/document&gt;&lt;password xsi:type=&quot;xsd:string&quot;&gt;&lt;/password&gt;&lt;/return&gt;&lt;/ns1:fetchResponse&gt;&lt;/SOAP-ENV:Body&gt;&lt;/SOAP-ENV:Envelope&gt;" mimeType="text/xml"/>
    </flow>
    <flow name="testSetVariableFlow3">
        <vm:inbound-endpoint path="${path3}" exchange-pattern="request-response"/>
        <set-variable variableName="testVariable" value="${variableValueWithManyDollarSign}"/>
        <set-payload value="&lt;SOA&lt;SOAP-ENV:Envelope SOAP-ENV:encodingStyle=&quot;http://schemas.xmlsoap.org/soap/encoding/&quot; xmlns:SOAP-ENV=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:SOAP-ENC=&quot;http://schemas.xmlsoap.org/soap/encoding/&quot; xmlns:tns=&quot;http://127.0.0.1/test.php&quot;&gt;&lt;SOAP-ENV:Body&gt;&lt;ns1:fetchResponse xmlns:ns1=&quot;http://127.0.0.1/test.php&quot;&gt;&lt;return xsi:type=&quot;tns:PdfDocument&quot;&gt;&lt;document xsi:type=&quot;xsd:string&quot;&gt;&lt;#[testVariable]&gt;&lt;/document&gt;&lt;password xsi:type=&quot;xsd:string&quot;&gt;&lt;/password&gt;&lt;/return&gt;&lt;/ns1:fetchResponse&gt;&lt;/SOAP-ENV:Body&gt;&lt;/SOAP-ENV:Envelope&gt;" mimeType="text/xml"/>
    </flow>
    <flow name="testSetVariableFlow4">
        <vm:inbound-endpoint path="${path4}" exchange-pattern="request-response"/>
        <set-variable variableName="testVariable" value="${variableValueWithManyDollarSignAndBlackSlashes}"/>
        <set-payload value="&lt;SOA&lt;SOAP-ENV:Envelope SOAP-ENV:encodingStyle=&quot;http://schemas.xmlsoap.org/soap/encoding/&quot; xmlns:SOAP-ENV=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:SOAP-ENC=&quot;http://schemas.xmlsoap.org/soap/encoding/&quot; xmlns:tns=&quot;http://127.0.0.1/test.php&quot;&gt;&lt;SOAP-ENV:Body&gt;&lt;ns1:fetchResponse xmlns:ns1=&quot;http://127.0.0.1/test.php&quot;&gt;&lt;return xsi:type=&quot;tns:PdfDocument&quot;&gt;&lt;document xsi:type=&quot;xsd:string&quot;&gt;&lt;#[testVariable]&gt;&lt;/document&gt;&lt;password xsi:type=&quot;xsd:string&quot;&gt;&lt;/password&gt;&lt;/return&gt;&lt;/ns1:fetchResponse&gt;&lt;/SOAP-ENV:Body&gt;&lt;/SOAP-ENV:Envelope&gt;" mimeType="text/xml"/>
    </flow>

</mule>